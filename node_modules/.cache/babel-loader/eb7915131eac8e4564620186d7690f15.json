{"ast":null,"code":"import _regeneratorRuntime from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/devugees/Desktop/react/react_users_sql_1.3.1/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/devugees/Desktop/react/react_users_sql_1.3.1/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios'; // Use of the bootstrap for the better style of all components\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Header from './layouts/Header';\nimport Users from './components/Users';\nimport UserDetails from './components/UserDetails';\nimport AddUser from './components/AddUser';\nimport EditUser from './components/EditUser'; // import testComp from './components/testComp';\n\nimport Information from './pages/Information';\nimport About from './pages/About';\nimport NotFound from './NotFound';\nimport Login from './components/UserLog/Login';\nimport SuccessLogin from './components/UserLog/SuccessLogin';\nimport SuccessLogout from './components/UserLog/SuccessLogout';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n/**\n * The main component where everything is connected.\n *\n * The components are connected with the use of \"Switch\" and \"Router\".\n * There is a component created as a navigation bar anyone can see the\n * different pages. This component is named \"Header\" and has the links\n * to the other pages. It also has a specific link for the logout option.\n * This gives the advantage of loading the different information without\n * having to reload the page, even though the persons sees it like pages\n * are being loaded.\n *\n * Describing the other components:\n *  - The \"Users\" component shows the all the information of the users.\n *  - The \"EditUser\" gives the possibility of changing the current information of\n *    the user. This component also receives the id of the specified user.\n *  - The \"AddUser\" deals with the creation of a new user.\n *  - The \"About\" component only shows some information about the application.\n *\n * At the beginning we see a login page. If the inserted username and password are\n * correct, then the we will see the list of names of the users. If we want to\n * more information, we can select the name of the specific user. We can also\n * delete a user by pressing the button located at the right side of each user.\n *\n * We also can edit the user's information by pressing the button on the right\n * side each user.\n * After the changes have been made, we can select save, so the\n * updated information is sent to the server.\n *\n * If we want to add a new user, we must select the \"Add\" link located on the\n * right side of the navigation bar (after \"Home\" link). All the fields need to\n * be filled. After that we can select the \"Add Contact\" button, so the new user\n * is sent to the server.\n *\n * If we want to logout, we just need to select the Logout icon located on the\n * right side of the navigation bar (last link).\n *\n *\n */\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: '',\n      password: '',\n      token: '',\n      error1: '',\n      error2: '',\n      dropdownOpen: false,\n      // Special for the help menu on the \"Header\" component\n      showLoggedOut: false // When the user logs out, this stay as true, so the\n      // SuccessLogout component can loaded\n\n    };\n    _this.location = '/';\n\n    _this.updateInput = function (event) {\n      event.preventDefault(); // Prevents page from reload\n      // if (!element.empty && element.complete)\n\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.loginWithEnterKeyCode =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(event.code === 13)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return axios('http://localhost:1024/login', {\n                  method: 'post',\n                  data: {\n                    username: _this.state.username,\n                    password: _this.state.password\n                  },\n                  withCredentials: true\n                });\n\n              case 3:\n                result = _context.sent;\n\n                if (result.data.error === 0) {\n                  alert('Login successful');\n                  localStorage.setItem('token', result.data.token);\n                }\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.login =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios('http://localhost:1024/login', {\n                method: 'post',\n                // The username and password to be sent\n                data: {\n                  username: _this.state.username,\n                  password: _this.state.password\n                },\n                // Credentials option\n                withCredentials: true\n              });\n\n            case 2:\n              result = _context2.sent;\n\n              if (result.data.error === 0) {\n                // alert('Login successful');\n                localStorage.setItem('token', result.data.token);\n\n                _this.setState({\n                  token: localStorage.getItem('token')\n                }); // return <Redirect to=\"/loggedin\" />;\n\n              } else {\n                // If there username or password are missing, errors come\n                if (result.data.code === 10001) _this.setState({\n                  error1: result.data.message\n                });else {\n                  _this.setState({\n                    error2: result.data.message\n                  });\n                }\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    _this.updateToken = function (tValue) {\n      _this.setState({\n        token: tValue\n      }); // console.log(this.state.token);\n      // this.props.history.push('/loggedin');\n\n    };\n\n    _this.logout =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var token, result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              token = localStorage.getItem('token');\n              _context3.next = 4;\n              return axios('http://localhost:1024/logout', {\n                method: 'post',\n                headers: {\n                  Authorization: 'Bearer ' + token\n                }\n              });\n\n            case 4:\n              result = _context3.sent;\n\n              if (result.data.error === 0) {\n                // alert(result.data.message);\n                _this.setState({\n                  showLoggedOut: true\n                });\n\n                _this.timeStatus = setInterval(function () {\n                  return _this.setState({\n                    token: '',\n                    error1: '',\n                    error2: '',\n                    showLoggedOut: false\n                  });\n                }, // Router.dispatch('/', null)\n                3000);\n              }\n\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              alert(_context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[0, 8]]);\n    }));\n\n    _this.updateInputHandler = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"toggleDpMenu\",\n    // This function switches the value for the dropdown help menu\n    value: function toggleDpMenu() {\n      this.setState(function (prevState) {\n        return {\n          dropdownOpen: !prevState.dropdownOpen\n        };\n      });\n    }\n    /**\n     * This function updates the username or the password.\n     * This is done character by character every time the user\n     * writes anything on the input fields of the form.\n     */\n\n  }, {\n    key: \"componentWillUpdate\",\n    value: function () {\n      var _componentWillUpdate = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                clearInterval(this.timeStatus);\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function componentWillUpdate() {\n        return _componentWillUpdate.apply(this, arguments);\n      };\n    }()\n    /* This function stores what the user writes in the input field.\n       For each input field, the information is store on the object of the\n       \"state\". This is done by the corresponding identification. That's why\n       every input field has the \"name\" tag. The value of this tag must match\n       the same name of the object belongin to \"state\". That way the value of the\n       input is stored character by character.\n    */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      /* Here the most important condition. If the object \"token\" initially is empty, than only the login screen is shown. Otherwise the information about the registered users is shown as well as all available options.*/\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, this.state.showLoggedOut === true ? React.createElement(SuccessLogout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }) : this.state.token === '' || this.state.token === undefined ? React.createElement(Login, {\n        status: this.state.token,\n        changeStatus: this.updateToken,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }) :\n      /**\n       * When the login is made, this is the div to be shown.\n       */\n      React.createElement(\"div\", {\n        className: \"App container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(Header, {\n        title: \"Users\",\n        logoutHandler: this.logout,\n        openVal: this.state.dropdownOpen,\n        dropdownHandler: function dropdownHandler() {\n          return _this2.toggleDpMenu();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        component: Users,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/loggedin\",\n        component: SuccessLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/loggedout\",\n        component: SuccessLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/userdetails/:id\",\n        component: UserDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/edituser/:id\",\n        component: EditUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/adduser\",\n        component: AddUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/information\",\n        component: Information,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }), React.createElement(Route, {\n        exact: true,\n        path: \"/about\",\n        component: About,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }), React.createElement(Route, {\n        component: NotFound,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/devugees/Desktop/react/react_users_sql_1.3.1/src/App.js"],"names":["React","Component","axios","Header","Users","UserDetails","AddUser","EditUser","Information","About","NotFound","Login","SuccessLogin","SuccessLogout","BrowserRouter","Router","Route","Switch","App","state","username","password","token","error1","error2","dropdownOpen","showLoggedOut","location","updateInput","event","preventDefault","setState","target","name","value","loginWithEnterKeyCode","code","method","data","withCredentials","result","error","alert","localStorage","setItem","login","getItem","message","updateToken","tValue","logout","headers","Authorization","timeStatus","setInterval","updateInputHandler","prevState","clearInterval","undefined","toggleDpMenu"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\n// Use of the bootstrap for the better style of all components\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nimport Header from './layouts/Header';\n\nimport Users from './components/Users';\nimport UserDetails from './components/UserDetails';\nimport AddUser from './components/AddUser';\nimport EditUser from './components/EditUser';\n// import testComp from './components/testComp';\n\nimport Information from './pages/Information';\nimport About from './pages/About';\nimport NotFound from './NotFound';\n\nimport Login from './components/UserLog/Login';\nimport SuccessLogin from './components/UserLog/SuccessLogin';\nimport SuccessLogout from './components/UserLog/SuccessLogout';\n\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\n/**\n * The main component where everything is connected.\n *\n * The components are connected with the use of \"Switch\" and \"Router\".\n * There is a component created as a navigation bar anyone can see the\n * different pages. This component is named \"Header\" and has the links\n * to the other pages. It also has a specific link for the logout option.\n * This gives the advantage of loading the different information without\n * having to reload the page, even though the persons sees it like pages\n * are being loaded.\n *\n * Describing the other components:\n *  - The \"Users\" component shows the all the information of the users.\n *  - The \"EditUser\" gives the possibility of changing the current information of\n *    the user. This component also receives the id of the specified user.\n *  - The \"AddUser\" deals with the creation of a new user.\n *  - The \"About\" component only shows some information about the application.\n *\n * At the beginning we see a login page. If the inserted username and password are\n * correct, then the we will see the list of names of the users. If we want to\n * more information, we can select the name of the specific user. We can also\n * delete a user by pressing the button located at the right side of each user.\n *\n * We also can edit the user's information by pressing the button on the right\n * side each user.\n * After the changes have been made, we can select save, so the\n * updated information is sent to the server.\n *\n * If we want to add a new user, we must select the \"Add\" link located on the\n * right side of the navigation bar (after \"Home\" link). All the fields need to\n * be filled. After that we can select the \"Add Contact\" button, so the new user\n * is sent to the server.\n *\n * If we want to logout, we just need to select the Logout icon located on the\n * right side of the navigation bar (last link).\n *\n *\n */\nclass App extends Component {\n  state = {\n    username: '',\n    password: '',\n    token: '',\n    error1: '',\n    error2: '',\n    dropdownOpen: false, // Special for the help menu on the \"Header\" component\n    showLoggedOut: false // When the user logs out, this stay as true, so the\n    // SuccessLogout component can loaded\n  };\n\n  location = '/';\n\n  // This function switches the value for the dropdown help menu\n  toggleDpMenu() {\n    this.setState(prevState => ({\n      dropdownOpen: !prevState.dropdownOpen\n    }));\n  }\n\n  /**\n   * This function updates the username or the password.\n   * This is done character by character every time the user\n   * writes anything on the input fields of the form.\n   */\n  updateInput = event => {\n    event.preventDefault(); // Prevents page from reload\n    // if (!element.empty && element.complete)\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  /* This function doesn't work. */\n  loginWithEnterKeyCode = async event => {\n    if (event.code === 13) {\n      const result = await axios('http://localhost:1024/login', {\n        method: 'post',\n        data: {\n          username: this.state.username,\n          password: this.state.password\n        },\n        withCredentials: true\n      });\n\n      if (result.data.error === 0) {\n        alert('Login successful');\n\n        localStorage.setItem('token', result.data.token);\n      }\n    }\n  };\n\n  /**\n   * This function deals with the user login. It sends a request to the server\n   * with the username and password inserted. If both match an existent account,\n   * the server sends back a response with a token. This token is store on the\n   * localStorage and on the object here from state. Then it's possible to see\n   * all the other information.\n   */\n  login = async () => {\n    const result = await axios('http://localhost:1024/login', {\n      method: 'post',\n      // The username and password to be sent\n      data: {\n        username: this.state.username,\n        password: this.state.password\n      },\n      // Credentials option\n      withCredentials: true\n    });\n\n    if (result.data.error === 0) {\n      // alert('Login successful');\n\n      localStorage.setItem('token', result.data.token);\n      this.setState({\n        token: localStorage.getItem('token')\n      });\n      // return <Redirect to=\"/loggedin\" />;\n    } else {\n      // If there username or password are missing, errors come\n      if (result.data.code === 10001)\n        this.setState({\n          error1: result.data.message\n        });\n      else {\n        this.setState({\n          error2: result.data.message\n        });\n      }\n    }\n  };\n\n  updateToken = tValue => {\n    this.setState({\n      token: tValue\n    });\n    // console.log(this.state.token);\n    // this.props.history.push('/loggedin');\n  };\n\n  /** This function makes the logout. it sends a logout request with the right\n   * associated token. If everything goes well, the response comes with error\n   * code \"0\", then all the objects on state are reset to its initial values.\n   */\n  logout = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const result = await axios('http://localhost:1024/logout', {\n        method: 'post',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      });\n      if (result.data.error === 0) {\n        // alert(result.data.message);\n        this.setState({\n          showLoggedOut: true\n        });\n        this.timeStatus = setInterval(\n          () =>\n            this.setState({\n              token: '',\n              error1: '',\n              error2: '',\n              showLoggedOut: false\n            }),\n          // Router.dispatch('/', null)\n          3000\n        );\n      }\n    } catch (e) {\n      alert(e);\n    }\n  };\n\n  async componentWillUpdate() {\n    clearInterval(this.timeStatus);\n  }\n\n  /* This function stores what the user writes in the input field.\n     For each input field, the information is store on the object of the\n     \"state\". This is done by the corresponding identification. That's why\n     every input field has the \"name\" tag. The value of this tag must match\n     the same name of the object belongin to \"state\". That way the value of the\n     input is stored character by character.\n  */\n  updateInputHandler = event => {\n    this.setState({\n      // While the first matches the specific object on state,\n      // the second one assigns the value to the object.\n      [event.target.name]: event.target.value\n    });\n  };\n  render() {\n    /* Here the most important condition. If the object \"token\" initially is empty, than only the login screen is shown. Otherwise the information about the registered users is shown as well as all available options.*/\n    return (\n      <Router>\n        {this.state.showLoggedOut === true ? (\n          <SuccessLogout />\n        ) : this.state.token === '' || this.state.token === undefined ? (\n          <Login status={this.state.token} changeStatus={this.updateToken} />\n        ) : (\n          /**\n           * When the login is made, this is the div to be shown.\n           */\n\n          <div className=\"App container\">\n            <Header\n              title=\"Users\"\n              logoutHandler={this.logout}\n              openVal={this.state.dropdownOpen}\n              dropdownHandler={() => this.toggleDpMenu()}\n            />\n            <Switch>\n              <Route exact path=\"/\" component={Users} />\n              <Route exact path=\"/loggedin\" component={SuccessLogin} />\n              <Route exact path=\"/loggedout\" component={SuccessLogout} />\n              <Route exact path=\"/userdetails/:id\" component={UserDetails} />\n              <Route exact path=\"/edituser/:id\" component={EditUser} />\n              <Route exact path=\"/adduser\" component={AddUser} />\n              <Route exact path=\"/information\" component={Information} />\n              <Route exact path=\"/about\" component={About} />\n              <Route component={NotFound} />\n            </Switch>\n          </div>\n        )}\n      </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}